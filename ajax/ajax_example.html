<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js" charset="utf-8"></script>

  <nav>
    <ul>
      <li><strong>Acme Corp</strong></li>
    </ul>
    <ul>
      <li><a href="#">About</a></li>
      <li><a href="#">Services</a></li>
      <li><a href="#">Products</a></li>
    </ul>
  </nav>

</head>

<body>

  <!-- This Defines the Form and the onsubmit calls the Javascript showCustomer() function defined below -->
  <form action="" onsubmit="showCustomer()">
    <input type="text" name="table" id="table" placeholder="Table">
    <input type="text" name="xv" id="xv" placeholder="X-Variable">
    <input type="text" name="yv" id="yv" placeholder="Y-Variable">
    <input type="submit">
  </form>

  <!-- This Div with id=tester is used to act as a placeholder for the plot. -->
  <div id="tester" style="width:600px;height:250px;"></div>

  <script>
    // This function is in a script tag, indicating javascript, it is called when we
    // click the submit button on the form above.
    function showCustomer() {
      // These 3 strings are retrieved from the table above and joined into one string
      // separated by commas in the format the php file expects to find after the ?q=
      // part. 

      // This part gets the strings from the table.
      str = document.getElementById("table").value;
      xt = document.getElementById("xv").value;
      yt = document.getElementById("yv").value;

      // This is how you join the strings into one big one.
      str = xt + "," + yt + "," + str;

      // This thing is weird and you don't always need it, but I think you need it specifically
      // for submit button based pages.
      event.preventDefault();

      // Here is where we start defining the XHTTP request that JS uses to call the php file 
      // with the variables.
      var xhttp;
      if (str == "") {
        // If the table variable/query variable is empty, make sure we're not displaying anything in temp. 
        // This isn't necessary in this example, but could be useful for particular configurations.
        document.getElementById("temp").innerHTML = "";
        return;
      }
      // this is where we define the actual request.
      xhttp = new XMLHttpRequest();

      // This function is called when the request loads from the php file.
      xhttp.onload = function () {
        // This if statement checks if we're ready and the php file returned a "working"
        // result (i.e. html status code 200, look this up if curious or confused.)
        if (this.readyState == 4 && this.status == 200) {

          // Since we have our php file returning the code in JSON, we need to parse the string as JSON.
          // this produces a list of Key-Value-Pairs, which are indexed by the key names, which we need to grab from
          // xt and yt variable from before. We do this, in this section of the code eval(`item.${xt}`) } below.
          var temp = JSON.parse(this.responseText);

          // This section uses the names of the x-variable and y-variable defined above to extract the values into 2 separate
          // arrays of values that we use with plotly to create a plot.
          var x_vals = temp.map((item) => { return eval(`item.${xt}`) });
          var y_vals = temp.map((item) => { return eval(`item.${yt}`) });

          // This section replaces the element called tester (which is currently empty)
          // with the result of the evaluation of the plotted data. This runs every time we 
          // click submit, so each time we change the varibles, the plot will update.
          TESTER = document.getElementById('tester');
          Plotly.newPlot(TESTER, [{
            x: x_vals,
            y: y_vals,
            type: 'bar'

          }], {
            margin: { t: 0 }
          });

        }
      };

      // This portion actually runs the HTTP request to the php file using the variables set in the table
      // and concatenated on line 49 into the str variable which contains x_variable,y_variable,table
      // but replace the placeholders with whatever variables/table  you're trying to query.
      xhttp.open("GET", "test.php?q=" + str, true);
      xhttp.send();
    }
  </script>

  <div id="temp"></div>

</body>

</html>